# Contributing

Instructions on how to contribute to the project.

## Overview

Contributions to XCStrings Tool are welcome!

- For ideas and questions: [Visit the Discussions](https://github.com/liamnichols/xcstrings-tool/discussions)
- For bugs: [Open an Issue](https://github.com/liamnichols/xcstrings-tool/issues/choose)
- For contributions: [Open a Pull Request](https://github.com/liamnichols/xcstrings-tool/compare)

## Running tests

To build and run all test cases open the xcstrings-tool hit âŒ˜U (command + U).

### Snapshot Tests

The majority of tests for the tool are implemented using snapshot tests. Generally speaking, snapshot tests compare a "snapshot" of the output generated by a previous version of the software being tested with the output generated by a subsequent versions. The test is passed if the outputs are the same. xcstrings-tool uses the Swift implementation for snapshot testing provided by the [swift-snapshot-testing](https://github.com/pointfreeco/swift-snapshot-testing) package. 

Since xcstrings-tool creates swift code from localization string files
In xcstrings-tool snapshot testing is handled by the [GenerateTests](https://github.com/liamnichols/xcstrings-tool/blob/main/Tests/XCStringsToolTests/GenerateTests.swift) class. When the snapshot tests are run, xcstrings-tool generates swift code using the .xcstrings localization string files stored in /Tests/XCStringsToolTests/__Fixtures__/. These files are then compared to the snapshots stored in /Tests/XCStringsToolTests/__Snapshots__/GenerateTests/

If there is a discrepancy between a generated file and its corresponding snapshot, the test will fail. This means that either the changes that have been made to xcstrings-tool have introduced a bug, or that those changes are expected to generated a swift file that differs from the snapshot. In the latter case the relevant snapshot file in the GenerateTests folder must be updated to reflect the change.

If a test fails and for any reason you want to view the generated swift files amend the trailing closure taken by the addTearDownBlock in GenerateTests.swift as follows:

addTeardownBlock {
            iffileManager.fileExists(atPath: outputURL.path()) {
                //try? fileManager.removeItem(at: outputURL)
             print(outputURL.path())
            }
Then rerun the tests using command + U in Xcode.

This will prevent the generated files from being removed after the test is run. The filepath for these files will be printed in the console. 
N.B. by commenting out this line you will be generating potentially unwanted swift files aver time you run the snapshot tests. 



